{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "5084e141-6c56-4d7f-bd8a-09f7ef9af1bc",
            "version": "KqlParameterItem/1.0",
            "name": "AzureFirewall",
            "label": "Azure Firewalls",
            "type": 5,
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "typeSettings": {
              "additionalResourceOptions": [
                "value::all"
              ],
              "showDefault": false
            }
          },
          {
            "id": "ab7d6c51-d7df-436c-96a2-429163aa50ec",
            "version": "KqlParameterItem/1.0",
            "name": "TimeRange",
            "type": 4,
            "isRequired": true,
            "value": {
              "durationMs": 43200000
            },
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 259200000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 1209600000
                },
                {
                  "durationMs": 2419200000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ],
              "allowCustom": true
            }
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.resourcegraph/resources"
      },
      "name": "parameters - 1"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "links": [
          {
            "id": "20847ce8-91bc-4d8b-b878-a5a41c95c31c",
            "cellValue": "selectedTab",
            "linkTarget": "parameter",
            "linkLabel": "Azure Firewall Overview",
            "subTarget": "AFOverview",
            "preText": "Azure Firewall Overview",
            "style": "link"
          }
        ]
      },
      "name": "links - 24"
    },
    {
      "type": 3,
      "content": {
        "version": "KqlItem/1.0",
        "query": "Resources \r\n| where type =~ 'Microsoft.network/azurefirewalls'\r\n| where id =~ {AzureFirewall}\r\n| extend FWprop = parse_json(properties)\r\n| project id, ProvisioningState = FWprop[\"provisioningState\"], SKU = parse_json(FWprop[\"sku\"])[\"tier\"]",
        "size": 4,
        "queryType": 1,
        "resourceType": "microsoft.resourcegraph/resources",
        "crossComponentResources": [
          "{AzureFirewall}"
        ]
      },
      "customWidth": "75",
      "name": "query - 11"
    },
    {
      "type": 1,
      "content": {
        "json": "### Useful documents\r\n* [Overview of Firewall](https://docs.microsoft.com/azure/firewall/overview)\r\n* [Monitor logs using Azure Firewall Workbook](https://docs.microsoft.com/azure/firewall/firewall-workbook) \r\n"
      },
      "customWidth": "25",
      "name": "text - 12"
    },
    {
      "type": 10,
      "content": {
        "chartId": "workbook76864ed5-dd34-42d0-ae35-f3db9f9e8f15",
        "version": "MetricsItem/2.0",
        "size": 0,
        "chartType": 3,
        "resourceType": "microsoft.network/azurefirewalls",
        "metricScope": 0,
        "resourceParameter": "AzureFirewall",
        "resourceIds": [
          "{AzureFirewall}"
        ],
        "timeContextFromParameter": "TimeRange",
        "timeContext": {
          "durationMs": 43200000
        },
        "metrics": [
          {
            "namespace": "microsoft.network/azurefirewalls",
            "metric": "microsoft.network/azurefirewalls--FirewallHealth",
            "aggregation": 4,
            "splitBy": null,
            "columnName": "Firewall Health"
          }
        ],
        "title": "Firewall Health",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Subscription",
              "formatter": 5
            },
            {
              "columnMatch": "Name",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource"
              }
            },
            {
              "columnMatch": "microsoft.network/azurefirewalls--DataProcessed Timeline",
              "formatter": 5
            },
            {
              "columnMatch": "microsoft.network/azurefirewalls--DataProcessed",
              "formatter": 1,
              "numberFormat": {
                "unit": 0,
                "options": null
              }
            }
          ],
          "rowLimit": 10000,
          "labelSettings": [
            {
              "columnId": "microsoft.network/azurefirewalls--DataProcessed",
              "label": "Data processed (Sum)"
            },
            {
              "columnId": "microsoft.network/azurefirewalls--DataProcessed Timeline",
              "label": "Data processed (Sum) Timeline"
            }
          ]
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "AFOverview"
      },
      "customWidth": "100",
      "name": "Firewall Health"
    },
    {
      "type": 10,
      "content": {
        "chartId": "workbook76864ed5-dd34-42d0-ae35-f3db9f9e8f15",
        "version": "MetricsItem/2.0",
        "size": 0,
        "chartType": 3,
        "resourceType": "microsoft.network/azurefirewalls",
        "metricScope": 0,
        "resourceParameter": "AzureFirewall",
        "resourceIds": [
          "{AzureFirewall}"
        ],
        "timeContextFromParameter": "TimeRange",
        "timeContext": {
          "durationMs": 43200000
        },
        "metrics": [
          {
            "namespace": "microsoft.network/azurefirewalls",
            "metric": "microsoft.network/azurefirewalls--DataProcessed",
            "aggregation": 1,
            "splitBy": null,
            "columnName": "Data Processed "
          }
        ],
        "title": "Data Processed",
        "gridSettings": {
          "formatters": [
            {
              "columnMatch": "Subscription",
              "formatter": 5
            },
            {
              "columnMatch": "Name",
              "formatter": 13,
              "formatOptions": {
                "linkTarget": "Resource"
              }
            },
            {
              "columnMatch": "microsoft.network/azurefirewalls--DataProcessed Timeline",
              "formatter": 5
            },
            {
              "columnMatch": "microsoft.network/azurefirewalls--DataProcessed",
              "formatter": 1,
              "numberFormat": {
                "unit": 0,
                "options": null
              }
            }
          ],
          "rowLimit": 10000,
          "labelSettings": [
            {
              "columnId": "microsoft.network/azurefirewalls--DataProcessed",
              "label": "Data processed (Sum)"
            },
            {
              "columnId": "microsoft.network/azurefirewalls--DataProcessed Timeline",
              "label": "Data processed (Sum) Timeline"
            }
          ]
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "AFOverview"
      },
      "customWidth": "50",
      "name": "Data Processed"
    },
    {
      "type": 10,
      "content": {
        "chartId": "workbook76864ed5-dd34-42d0-ae35-f3db9f9e8f15",
        "version": "MetricsItem/2.0",
        "size": 0,
        "chartType": 2,
        "resourceType": "microsoft.network/azurefirewalls",
        "metricScope": 0,
        "resourceParameter": "AzureFirewall",
        "resourceIds": [
          "{AzureFirewall}"
        ],
        "timeContextFromParameter": "TimeRange",
        "timeContext": {
          "durationMs": 43200000
        },
        "metrics": [
          {
            "namespace": "microsoft.network/azurefirewalls",
            "metric": "microsoft.network/azurefirewalls--Throughput",
            "aggregation": 4,
            "splitBy": null,
            "columnName": "All Firewall Throughput Average"
          }
        ],
        "title": "Average Throughput of Firewall Traffic",
        "gridSettings": {
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "AFOverview"
      },
      "customWidth": "50",
      "name": "metric - 25"
    },
    {
      "type": 10,
      "content": {
        "chartId": "workbook76864ed5-dd34-42d0-ae35-f3db9f9e8f15",
        "version": "MetricsItem/2.0",
        "size": 0,
        "chartType": 2,
        "resourceType": "microsoft.network/azurefirewalls",
        "metricScope": 0,
        "resourceParameter": "AzureFirewall",
        "resourceIds": [
          "{AzureFirewall}"
        ],
        "timeContextFromParameter": "TimeRange",
        "timeContext": {
          "durationMs": 43200000
        },
        "metrics": [
          {
            "namespace": "microsoft.network/azurefirewalls",
            "metric": "microsoft.network/azurefirewalls--SNATPortUtilization",
            "aggregation": 4,
            "splitBy": null
          }
        ],
        "title": "SNAT Port Utilization",
        "gridSettings": {
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "AFOverview"
      },
      "customWidth": "50",
      "name": "metric - 25 - Copy"
    },
    {
      "type": 10,
      "content": {
        "chartId": "workbook76864ed5-dd34-42d0-ae35-f3db9f9e8f15",
        "version": "MetricsItem/2.0",
        "size": 0,
        "chartType": 2,
        "resourceType": "microsoft.network/azurefirewalls",
        "metricScope": 0,
        "resourceParameter": "AzureFirewall",
        "resourceIds": [
          "{AzureFirewall}"
        ],
        "timeContextFromParameter": "TimeRange",
        "timeContext": {
          "durationMs": 43200000
        },
        "metrics": [
          {
            "namespace": "microsoft.network/azurefirewalls",
            "metric": "microsoft.network/azurefirewalls--NetworkRuleHit",
            "aggregation": 1,
            "splitBy": null
          }
        ],
        "title": "Network Rule Hitcount (SUM)",
        "gridSettings": {
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "AFOverview"
      },
      "customWidth": "50",
      "name": "metric - 25 - Copy - Copy"
    },
    {
      "type": 10,
      "content": {
        "chartId": "workbook76864ed5-dd34-42d0-ae35-f3db9f9e8f15",
        "version": "MetricsItem/2.0",
        "size": 0,
        "chartType": 2,
        "resourceType": "microsoft.network/azurefirewalls",
        "metricScope": 0,
        "resourceParameter": "AzureFirewall",
        "resourceIds": [
          "{AzureFirewall}"
        ],
        "timeContextFromParameter": "TimeRange",
        "timeContext": {
          "durationMs": 43200000
        },
        "metrics": [
          {
            "namespace": "microsoft.network/azurefirewalls",
            "metric": "microsoft.network/azurefirewalls--ApplicationRuleHit",
            "aggregation": 1,
            "splitBy": null
          }
        ],
        "title": "Application Rule Hitcount (SUM)",
        "gridSettings": {
          "rowLimit": 10000
        }
      },
      "conditionalVisibility": {
        "parameterName": "selectedTab",
        "comparison": "isEqualTo",
        "value": "AFOverview"
      },
      "customWidth": "50",
      "name": "metric - 25 - Copy - Copy - Copy"
    }
  ],
  "fallbackResourceIds": [
    "Azure Monitor"
  ],
  "fromTemplateId": "sentinel-AzureFirewall",
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}